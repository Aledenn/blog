# DOM树
## 什么是DOM
从网络传给渲染引擎的HTML文件字节流是无法直接被渲染引擎渲染的，需要把它转化为渲染引擎能够理解的内部结构,这个结构就是DOM。  
提供了HTML文档`结构化`的表述。

- 从页面的视角来看，DOM 是生成页面的基础数据结构。  
- 从 JavaScript 脚本视角来看，DOM 提供给 JavaScript 脚本操作的接口，通过这套接口，JavaScript 可以对 DOM 结构进行访问，从而改变文档的结构、样式和内容。
- 从安全视角来看，DOM 是一道安全防护线，一些不安全的内容在 DOM 解析阶段就被拒之门外了。

DOM是`表述HTML的内部数据结构`，它会将 Web 页面和 JavaScript 脚本连接起来，并过滤一些不安全的内容

## DOM树是如何生成的
渲染引擎内部有一个`HTML解析器HTMLParser`，值得注意的是HTML解析器并不是等整个文档加载完成后解析的，而是`网络进程加载了多少数据，HTML解析器便解析多少数据`。

### HTMLParser流程
1. 网络进程接收到响应头之后，会根据响应头中的 content-type 字段来判断文件的类型，比如 content-type 的值是“text/html”，那么浏览器就会判断这是一个 HTML 类型的文件，然后为该请求选择或者创建一个渲染进程。  
2. 渲染进程准备好后，和网络进程之间会建立一个`共享数据的管道`。
3. 网络进程接收到数据后就往管道中放，`渲染进程则从管道另一边获取数据`，并推给`HTML解析器`。
4. HTML解析器动态接收字节流，并将其`解析为DOM`。


## 好文推荐
[网页性能管理详解](https://www.ruanyifeng.com/blog/2015/09/web-page-performance-in-depth.html)