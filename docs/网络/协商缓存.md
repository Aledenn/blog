# 协商缓存

## 第一次请求
<img src="./image/第一次请求.png" />

## 协商缓存的过程
<img src="./image/协商缓存过程.png" />

## 为啥Etag和Last-modified同时存在?
- 有时候周期性的更新某个文件，但并不更新内容，`Last-modified变了，Etag`不变,这个时候我们任然不需要重新获取资源
- 某些文件更改十分频繁，比如在秒以下的时间内进行修改，(比方说1s内修改了N次)，if-modified-since能检查到的`粒度是秒级`的，这种修改无法判断(或者说UNIX记录MTIME只能精确到秒)；
- 某些服务器不能精确的得到文件的最后修改时间。

## Todo
- 一般协商缓存是用在获取资源js、css等，可是有些网站的的xhr请求也使用协商缓存，这里不太明白怎么做到，使用Redis缓存这个JSON文件？